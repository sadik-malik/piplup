import { Meta } from '@storybook/blocks';

<Meta title="Cache-Buster/Installation" />

# Cache Buster

The cache buster library (&lt; 1KB) helps bust the cache by checking for changes based on a unique release ID and calling window.location.reload when a change in the release ID is detected in your React application.

# Installation

Run one of the following commands to add @piplup/cache-buster to your project:

```bash
npm install @piplup/rhf-core react-hook-form

# or

pnpm add @piplup/rhf-core react-hook-form

# or

yarn add @piplup/rhf-core react-hook-form
```

# Usage

1. **Integration with your build process**:

   Include a script in your package.json to generate a release ID before building your application:

```json
{
  "scripts": {
    "build": "piplup-cache-buster --publicDir=public && react-scripts build"
  }
}
```

Alternatively, if you are using `vite` to build your react application. You can use `@piplup/vite-plugin-cache-buster` and update your vite configuration file (usually `vite.config.js` or `vite.config.ts`) to the following:

```javascript
import { vitePluginCacheBuster } from '@piplup/vite-plugin-cache-buster';

export default {
  // Other Vite config options...
  plugins: [vitePluginCacheBuster() /*...other plugins */],
};
```

2. **Integrate CacheBuster into your application**:

```jsx
import { CacheBuster } from '@piplup/cache-buster';

function App() {
  return (
    <>
      <CacheBuster
        loading={null} // Optional: Add a loading component to display loading.
        verbose={false} // Optional: If true, logs will be visible.
        storageKey="RELEASE" // Optional: local storage key for storing the unique release ID.
        enabled={process.env.NODE_ENV === 'production'}
      />
      <YourApp />
    </>
  );
}

export default App;
```
